<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/winstonjs/node-loggly#readme">loggly (v1.1.1)</a>
</h1>
<h4>A client implementation for Loggly cloud Logging-as-a-Service API</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly">module loggly</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly">
            function <span class="apidocSignatureSpan">loggly.</span>Loggly
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Search">
            function <span class="apidocSignatureSpan">loggly.</span>Search
            <span class="apidocSignatureSpan">(options, client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.createClient">
            function <span class="apidocSignatureSpan">loggly.</span>createClient
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.serialize">
            function <span class="apidocSignatureSpan">loggly.</span>serialize
            <span class="apidocSignatureSpan">(obj, key)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan"></span>loggly</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loggly.</span>Loggly.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loggly.</span>Search.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loggly.</span>client</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loggly.</span>common</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loggly.</span>search</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">loggly.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.Loggly">module loggly.Loggly</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly.Loggly">
            function <span class="apidocSignatureSpan">loggly.</span>Loggly
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly.super_">
            function <span class="apidocSignatureSpan">loggly.Loggly.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.Loggly.prototype">module loggly.Loggly.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly.prototype.customer">
            function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>customer
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly.prototype.log">
            function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>log
            <span class="apidocSignatureSpan">(msg, tags, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly.prototype.logglyUrl">
            function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>logglyUrl
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly.prototype.search">
            function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>search
            <span class="apidocSignatureSpan">(query, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Loggly.prototype.tagFilter">
            function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>tagFilter
            <span class="apidocSignatureSpan">(tags)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.Search">module loggly.Search</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Search.Search">
            function <span class="apidocSignatureSpan">loggly.</span>Search
            <span class="apidocSignatureSpan">(options, client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Search.super_">
            function <span class="apidocSignatureSpan">loggly.Search.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.Search.prototype">module loggly.Search.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Search.prototype._checkRange">
            function <span class="apidocSignatureSpan">loggly.Search.prototype.</span>_checkRange
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.Search.prototype.run">
            function <span class="apidocSignatureSpan">loggly.Search.prototype.</span>run
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.client">module loggly.client</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.client.Loggly">
            function <span class="apidocSignatureSpan">loggly.client.</span>Loggly
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.client.createClient">
            function <span class="apidocSignatureSpan">loggly.client.</span>createClient
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.common">module loggly.common</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.common.clone">
            function <span class="apidocSignatureSpan">loggly.common.</span>clone
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.common.loggly">
            function <span class="apidocSignatureSpan">loggly.common.</span>loggly
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.common.serialize">
            function <span class="apidocSignatureSpan">loggly.common.</span>serialize
            <span class="apidocSignatureSpan">(obj, key)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loggly.common.</span>failCodes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">loggly.common.</span>successCodes</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.loggly">module loggly.loggly</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.loggly.Loggly">
            function <span class="apidocSignatureSpan">loggly.loggly.</span>Loggly
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.loggly.Search">
            function <span class="apidocSignatureSpan">loggly.loggly.</span>Search
            <span class="apidocSignatureSpan">(options, client)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.loggly.createClient">
            function <span class="apidocSignatureSpan">loggly.loggly.</span>createClient
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.loggly.serialize">
            function <span class="apidocSignatureSpan">loggly.loggly.</span>serialize
            <span class="apidocSignatureSpan">(obj, key)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">loggly.loggly.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.loggly.search">module loggly.search</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.loggly.search.Search">
            function <span class="apidocSignatureSpan">loggly.search.</span>Search
            <span class="apidocSignatureSpan">(options, client)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly" id="apidoc.module.loggly">module loggly</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.Loggly" id="apidoc.element.loggly.Loggly">
        function <span class="apidocSignatureSpan">loggly.</span>Loggly
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Loggly = function (options) {
  if (!options || !options.subdomain || !options.token) {
    throw new Error('options.subdomain and options.token are required.');
  }

  events.EventEmitter.call(this);
  this.subdomain    = options.subdomain;
  this.token        = options.token;
  this.host         = options.host || 'logs-01.loggly.com';
  this.json         = options.json || null;
  this.auth         = options.auth || null;
  this.proxy        = options.proxy || null;
  this.userAgent    = 'node-loggly ' + loggly.version;
  this.useTagHeader = 'useTagHeader' in options ? options.useTagHeader : true;

  //
  // Set the tags on this instance.
  //
  this.tags = options.tags
    ? this.tagFilter(options.tags)
    : null;

  var url   = 'https://' + this.host,
      api   = options.api  || 'apiv2';

  this.urls = {
    default: url,
    log:     [url, 'inputs', this.token].join('/'),
    bulk:    [url, 'bulk', this.token].join('/'),
    api:     'https://' + [this.subdomain, 'loggly', 'com'].join('.') + '/' + api
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Search" id="apidoc.element.loggly.Search">
        function <span class="apidocSignatureSpan">loggly.</span>Search
        <span class="apidocSignatureSpan">(options, client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Search = function (options, client) {
  if (!options || (!options.query &amp;&amp; !options.q)) {
    throw new Error('options.query is required to execute a Loggly search.');
  }

  events.EventEmitter.call(this);

  if (options.query) {
    options.q = options.query;
    delete options.query;
  }

  this.options = options;
  this.client  = client;

  //
  // If we're passed a callback, run immediately.
  //
  if (options.callback) {
    this.callback = options.callback;
    delete options.callback;
    this.run();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.createClient" id="apidoc.element.loggly.createClient">
        function <span class="apidocSignatureSpan">loggly.</span>createClient
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createClient = function (options) {
  return new Loggly(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Getting Started
Before we can do anything with Loggly, we have to create a client with valid credentials. We will authenticate for you automatically
:

``` js
var loggly = require('loggly');

var client = loggly.<span class="apidocCodeKeywordSpan">createClient</span>({
  token: "your-really-long-input-token",
  subdomain: "your-subdomain",
  auth: {
    username: "your-username",
    password: "your-password"
  },
  //
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.serialize" id="apidoc.element.loggly.serialize">
        function <span class="apidocSignatureSpan">loggly.</span>serialize
        <span class="apidocSignatureSpan">(obj, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serialize = function (obj, key) {
  if (obj === null) {
    obj = 'null';
  }
  else if (obj === undefined) {
    obj = 'undefined';
  }
  else if (obj === false) {
    obj = 'false';
  }

  if (typeof obj !== 'object') {
    return key ? key + '=' + obj : obj;
  }

  var msg = '',
      keys = Object.keys(obj),
      length = keys.length;

  for (var i = 0; i &lt; length; i++) {
    if (Array.isArray(obj[keys[i]])) {
      msg += keys[i] + '=[';

      for (var j = 0, l = obj[keys[i]].length; j &lt; l; j++) {
        msg += common.serialize(obj[keys[i]][j]);
        if (j &lt; l - 1) {
          msg += ', ';
        }
      }

      msg += ']';
    }
    else {
      msg += common.serialize(obj[keys[i]], keys[i]);
    }

    if (i &lt; length - 1) {
      msg += ', ';
    }
  }

  return msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//
// Remark: Have some extra logic for detecting if we want to make a bulk
// request to loggly
//
var isBulk = Array.isArray(msg);
function serialize(msg) {
  if (msg instanceof Object) {
    return self.json ? stringify(msg) : common.<span class="apidocCodeKeywordSpan">serialize</span>(msg);
  }
  else {
    return self.json ? stringify({ message: msg }) : msg;
  }
}

msg = isBulk ? msg.map(serialize).join('\n') : serialize(msg);
...</pre></li>
    </ul>
















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.Loggly" id="apidoc.module.loggly.Loggly">module loggly.Loggly</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.Loggly.Loggly" id="apidoc.element.loggly.Loggly.Loggly">
        function <span class="apidocSignatureSpan">loggly.</span>Loggly
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Loggly = function (options) {
  if (!options || !options.subdomain || !options.token) {
    throw new Error('options.subdomain and options.token are required.');
  }

  events.EventEmitter.call(this);
  this.subdomain    = options.subdomain;
  this.token        = options.token;
  this.host         = options.host || 'logs-01.loggly.com';
  this.json         = options.json || null;
  this.auth         = options.auth || null;
  this.proxy        = options.proxy || null;
  this.userAgent    = 'node-loggly ' + loggly.version;
  this.useTagHeader = 'useTagHeader' in options ? options.useTagHeader : true;

  //
  // Set the tags on this instance.
  //
  this.tags = options.tags
    ? this.tagFilter(options.tags)
    : null;

  var url   = 'https://' + this.host,
      api   = options.api  || 'apiv2';

  this.urls = {
    default: url,
    log:     [url, 'inputs', this.token].join('/'),
    bulk:    [url, 'bulk', this.token].join('/'),
    api:     'https://' + [this.subdomain, 'loggly', 'com'].join('.') + '/' + api
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Loggly.super_" id="apidoc.element.loggly.Loggly.super_">
        function <span class="apidocSignatureSpan">loggly.Loggly.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.Loggly.prototype" id="apidoc.module.loggly.Loggly.prototype">module loggly.Loggly.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.Loggly.prototype.customer" id="apidoc.element.loggly.Loggly.prototype.customer">
        function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>customer
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">customer = function (callback) {
  common.loggly({
    uri: this.logglyUrl('customer'),
    auth: this.auth
  }, callback, function (res, body) {
    var customer;
    try { customer = JSON.parse(body) }
    catch (ex) { return callback(ex) }
    callback(null, customer);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Loggly.prototype.log" id="apidoc.element.loggly.Loggly.prototype.log">
        function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>log
        <span class="apidocSignatureSpan">(msg, tags, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (msg, tags, callback) {
  if (!callback &amp;&amp; typeof tags === 'function') {
    callback = tags;
    tags = null;
  }

  var self = this,
      logOptions;

  //
  // Remark: Have some extra logic for detecting if we want to make a bulk
  // request to loggly
  //
  var isBulk = Array.isArray(msg);
  function serialize(msg) {
    if (msg instanceof Object) {
      return self.json ? stringify(msg) : common.serialize(msg);
    }
    else {
      return self.json ? stringify({ message: msg }) : msg;
    }
  }

  msg = isBulk ? msg.map(serialize).join('\n') : serialize(msg);

  logOptions = {
    uri:     isBulk ? this.urls.bulk : this.urls.log,
    method:  'POST',
    body:    msg,
    proxy:   this.proxy,
    headers: {
      host:             this.host,
      accept:           '*/*',
      'user-agent':     this.userAgent,
      'content-type':   this.json ? 'application/json' : 'text/plain',
      'content-length': Buffer.byteLength(msg)
    }
  };

  //
  // Remark: if tags are passed in run the filter on them and concat
  // with any tags that were passed or just use default tags if they exist
  //
  tags = tags
    ? (this.tags ? this.tags.concat(this.tagFilter(tags)) : this.tagFilter(tags))
    : this.tags;

  //
  // Optionally send `X-LOGGLY-TAG` if we have them
  //
  if (tags) {
    // Decide whether to add tags as http headers or add them to the URI.
    if (this.useTagHeader) {
      logOptions.headers['X-LOGGLY-TAG'] = tags.join(',');
    }
    else {
      logOptions.uri += '/tag/' + tags.join(',') + '/';
    }
  }

  common.loggly(logOptions, callback, function (res, body) {
    try {
      var result = JSON.parse(body);
      self.emit('log', result);
      if (callback) {
        callback(null, result);
      }
    }
    catch (ex) {
      if (callback) {
        callback(new Error('Unspecified error from Loggly: ' + ex));
      }
    }
  });

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
```

### Logging
There are two ways to send log information to Loggly via node-loggly. The first is to simply call client.log with an appropriate
 input token:

``` js
  client.<span class="apidocCodeKeywordSpan">log</span>('127.0.0.1 - Theres no place like home', function (err, result
) {
    // Do something once you've logged
  });
```

Note that the callback in the above example is optional, if you prefer the 'fire and forget' method of logging:

``` js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Loggly.prototype.logglyUrl" id="apidoc.element.loggly.Loggly.prototype.logglyUrl">
        function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>logglyUrl
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logglyUrl = function () {
  var args = Array.prototype.slice.call(arguments);
  return [this.urls.api].concat(args).join('/');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// ### function customer (callback)
// ### @callback {function} Continuation to respond to.
// Retrieves the customer information from the Loggly API:
//   - http://www.loggly.com/docs/api-account-info/
//
Loggly.prototype.customer = function (callback) {
common.loggly({
  uri: this.<span class="apidocCodeKeywordSpan">logglyUrl</span>('customer'),
  auth: this.auth
}, callback, function (res, body) {
  var customer;
  try { customer = JSON.parse(body) }
  catch (ex) { return callback(ex) }
  callback(null, customer);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Loggly.prototype.search" id="apidoc.element.loggly.Loggly.prototype.search">
        function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>search
        <span class="apidocSignatureSpan">(query, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">search = function (query, callback) {
  var options = typeof query === 'string'
    ? { query: query }
    : query;

  options.callback = callback;
  return new Search(options, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Searching
[Searching][search-api] with node-loggly is easy. All you have to do is use the search() method defined on each Loggly client:

``` js
  var util = require('util');

  client.<span class="apidocCodeKeywordSpan">search</span>('404', function (err, results) {
    // Inspect the result set
    console.dir(results.events);
  });
```

The search() method can also take an Object parameter that allows you to set additional search parameters such as: rows, from, until
, etc.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Loggly.prototype.tagFilter" id="apidoc.element.loggly.Loggly.prototype.tagFilter">
        function <span class="apidocSignatureSpan">loggly.Loggly.prototype.</span>tagFilter
        <span class="apidocSignatureSpan">(tags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tagFilter = function (tags) {
  var isSolid = /^[\w\d][\w\d-_.]+/;

  tags = !Array.isArray(tags)
    ? [tags]
    : tags;

  //
  // TODO: Filter against valid tag names with some Regex
  // http://www.loggly.com/docs/tags/
  // Remark: Docs make me think we dont need this but whatevs
  //
  return tags.filter(function (tag) {
    //
    // Remark: length may need to use Buffer.byteLength?
    //
    return isSolid.test(tag) &amp;&amp; tag.length &lt;= 64;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.userAgent    = 'node-loggly ' + loggly.version;
this.useTagHeader = 'useTagHeader' in options ? options.useTagHeader : true;

//
// Set the tags on this instance.
//
this.tags = options.tags
  ? this.<span class="apidocCodeKeywordSpan">tagFilter</span>(options.tags)
  : null;

var url   = 'https://' + this.host,
    api   = options.api  || 'apiv2';

this.urls = {
  default: url,
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.Search" id="apidoc.module.loggly.Search">module loggly.Search</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.Search.Search" id="apidoc.element.loggly.Search.Search">
        function <span class="apidocSignatureSpan">loggly.</span>Search
        <span class="apidocSignatureSpan">(options, client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Search = function (options, client) {
  if (!options || (!options.query &amp;&amp; !options.q)) {
    throw new Error('options.query is required to execute a Loggly search.');
  }

  events.EventEmitter.call(this);

  if (options.query) {
    options.q = options.query;
    delete options.query;
  }

  this.options = options;
  this.client  = client;

  //
  // If we're passed a callback, run immediately.
  //
  if (options.callback) {
    this.callback = options.callback;
    delete options.callback;
    this.run();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Search.super_" id="apidoc.element.loggly.Search.super_">
        function <span class="apidocSignatureSpan">loggly.Search.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.Search.prototype" id="apidoc.module.loggly.Search.prototype">module loggly.Search.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.Search.prototype._checkRange" id="apidoc.element.loggly.Search.prototype._checkRange">
        function <span class="apidocSignatureSpan">loggly.Search.prototype.</span>_checkRange
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_checkRange = function () {
  if (!this.options.until &amp;&amp; !this.options.from) {
    return;
  }

  this.options.until = this.options.until || 'now';
  this.options.from  = this.options.from  || '-24h';

  if (!timespan.parseDate(this.options.until)) {
    this.options.until = 'now';
  }

  if (!timespan.parseDate(this.options.from)) {
    this.options.from = '-24h';
  }

  if (timespan.fromDates(this.options.from, this.options.until) &lt; 0
    || this.options.until === this.options.from) {
    //
    // If the length of the timespan for this Search instance is
    // negative then set it to default values
    //
    this.options.until = 'now';
    this.options.from = '-24h';
  }

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
}

//
// Check any time ranges (if supplied) to ensure
// they are valid.
//
this.<span class="apidocCodeKeywordSpan">_checkRange</span>();

common.loggly({
  uri:  this.client.logglyUrl('search?' + qs.stringify(this.options)),
  auth: this.client.auth,
  json: true
}, this.callback, function (res, body) {
  var rsid;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.Search.prototype.run" id="apidoc.element.loggly.Search.prototype.run">
        function <span class="apidocSignatureSpan">loggly.Search.prototype.</span>run
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function (callback) {
  var self = this,
      responded;

  //
  // Trim the search query
  //
  this.options.q.trim();

  //
  // Update the callback for this instance if it's passed
  //
  this.callback = callback || this.callback;
  if (!this.callback) {
    throw new Error('Cannot run search without a callback function.');
  }

  //
  // ### function respond (arguments...)
  // Responds only once.
  //
  function respond() {
    if (!responded) {
      responded = true;
      self.callback.apply(null, arguments);
    }
  }

  //
  // ### function awaitResults (rsid)
  // Checks the Loggly API on an interval for the
  // results from the specified `rsid`.
  //
  function awaitResults(rsid) {
    if (!rsid || !rsid.id) {
      return respond(rsid);
    }

    common.loggly({
      uri:  self.client.logglyUrl('events?' + qs.stringify({ rsid: rsid.id })),
      auth: self.client.auth,
      json: true
    }, respond, function (res, body) {
      var results;
      try { results = JSON.parse(body) }
      catch (ex) { return respond(ex) }
      respond(null, results);
    });
  }

  //
  // Check any time ranges (if supplied) to ensure
  // they are valid.
  //
  this._checkRange();

  common.loggly({
    uri:  this.client.logglyUrl('search?' + qs.stringify(this.options)),
    auth: this.client.auth,
    json: true
  }, this.callback, function (res, body) {
    var rsid;
    try { rsid = JSON.parse(body).rsid }
    catch (ex) { rsid = ex }

    self.emit('rsid', rsid);
    awaitResults(rsid);
  });

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

The search() method can also take an Object parameter that allows you to set additional search parameters such as: rows, from, until
, etc.

``` js
  var util = require('util');

  client.search({ query: '404', rows: 10 })
    .<span class="apidocCodeKeywordSpan">run</span>(function (err, results) {
      // Inspect the result set
      console.dir(results.events);
    });
```

See the [Loggly search guide][search] for more details on how to effectively search through your Loggly logs.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.client" id="apidoc.module.loggly.client">module loggly.client</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.client.Loggly" id="apidoc.element.loggly.client.Loggly">
        function <span class="apidocSignatureSpan">loggly.client.</span>Loggly
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Loggly = function (options) {
  if (!options || !options.subdomain || !options.token) {
    throw new Error('options.subdomain and options.token are required.');
  }

  events.EventEmitter.call(this);
  this.subdomain    = options.subdomain;
  this.token        = options.token;
  this.host         = options.host || 'logs-01.loggly.com';
  this.json         = options.json || null;
  this.auth         = options.auth || null;
  this.proxy        = options.proxy || null;
  this.userAgent    = 'node-loggly ' + loggly.version;
  this.useTagHeader = 'useTagHeader' in options ? options.useTagHeader : true;

  //
  // Set the tags on this instance.
  //
  this.tags = options.tags
    ? this.tagFilter(options.tags)
    : null;

  var url   = 'https://' + this.host,
      api   = options.api  || 'apiv2';

  this.urls = {
    default: url,
    log:     [url, 'inputs', this.token].join('/'),
    bulk:    [url, 'bulk', this.token].join('/'),
    api:     'https://' + [this.subdomain, 'loggly', 'com'].join('.') + '/' + api
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.client.createClient" id="apidoc.element.loggly.client.createClient">
        function <span class="apidocSignatureSpan">loggly.client.</span>createClient
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createClient = function (options) {
  return new Loggly(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Getting Started
Before we can do anything with Loggly, we have to create a client with valid credentials. We will authenticate for you automatically
:

``` js
var loggly = require('loggly');

var client = loggly.<span class="apidocCodeKeywordSpan">createClient</span>({
  token: "your-really-long-input-token",
  subdomain: "your-subdomain",
  auth: {
    username: "your-username",
    password: "your-password"
  },
  //
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.common" id="apidoc.module.loggly.common">module loggly.common</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.common.clone" id="apidoc.element.loggly.common.clone">
        function <span class="apidocSignatureSpan">loggly.common.</span>clone
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (obj) {
  var clone = {};
  for (var i in obj) {
    clone[i] = obj[i] instanceof Object ? common.clone(obj[i]) : obj[i];
  }

  return clone;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// function clone (obj)
//   Helper method for deep cloning pure JSON objects
//   i.e. JSON objects that are either literals or objects (no Arrays, etc)
//
common.clone = function (obj) {
  var clone = {};
  for (var i in obj) {
    clone[i] = obj[i] instanceof Object ? common.<span class="apidocCodeKeywordSpan">clone</span>(obj[i]) : obj[i];
  }

  return clone;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.common.loggly" id="apidoc.element.loggly.common.loggly">
        function <span class="apidocSignatureSpan">loggly.common.</span>loggly
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loggly = function () {
  var args = Array.prototype.slice.call(arguments),
      success = args.pop(),
      callback = args.pop(),
      responded,
      requestBody,
      headers,
      method,
      auth,
      proxy,
      uri;

  //
  // Now that we've popped off the two callbacks
  // We can make decisions about other arguments
  //
  if (args.length === 1) {
    if (typeof args[0] === 'string') {
      //
      // If we got a string assume that it's the URI
      //
      method = 'GET';
      uri    = args[0];
    }
    else {
      method      = args[0].method || 'GET';
      uri         = args[0].uri;
      requestBody = args[0].body;
      auth        = args[0].auth;
      headers     = args[0].headers;
      proxy       = args[0].proxy;
    }
  }
  else if (args.length === 2) {
    method = 'GET';
    uri    = args[0];
    auth   = args[1];
  }
  else {
    method = args[0];
    uri    = args[1];
    auth   = args[2];
  }

  function onError(err) {
    if (!responded) {
      responded = true;
      if (callback) { callback(err) }
    }
  }

  var requestOptions = {
    uri: uri,
    method: method,
    headers: headers || {},
    proxy: proxy
  };

  if (auth) {
    requestOptions.headers.authorization = 'Basic ' + new Buffer(auth.username + ':' + auth.password).toString('base64');
  }

  if (requestBody) {
    requestOptions.body = requestBody;
  }

  try {
    request(requestOptions, function (err, res, body) {
      if (err) {
        return onError(err);
      }

      var statusCode = res.statusCode.toString();
      if (Object.keys(failCodes).indexOf(statusCode) !== -1) {
        return onError((new Error('Loggly Error (' + statusCode + '): ' + failCodes[statusCode])));
      }

      success(res, body);
    });
  }
  catch (ex) {
    onError(ex);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    logOptions.headers['X-LOGGLY-TAG'] = tags.join(',');
  }
  else {
    logOptions.uri += '/tag/' + tags.join(',') + '/';
  }
}

common.<span class="apidocCodeKeywordSpan">loggly</span>(logOptions, callback, function (res, body) {
  try {
    var result = JSON.parse(body);
    self.emit('log', result);
    if (callback) {
      callback(null, result);
    }
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.common.serialize" id="apidoc.element.loggly.common.serialize">
        function <span class="apidocSignatureSpan">loggly.common.</span>serialize
        <span class="apidocSignatureSpan">(obj, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serialize = function (obj, key) {
  if (obj === null) {
    obj = 'null';
  }
  else if (obj === undefined) {
    obj = 'undefined';
  }
  else if (obj === false) {
    obj = 'false';
  }

  if (typeof obj !== 'object') {
    return key ? key + '=' + obj : obj;
  }

  var msg = '',
      keys = Object.keys(obj),
      length = keys.length;

  for (var i = 0; i &lt; length; i++) {
    if (Array.isArray(obj[keys[i]])) {
      msg += keys[i] + '=[';

      for (var j = 0, l = obj[keys[i]].length; j &lt; l; j++) {
        msg += common.serialize(obj[keys[i]][j]);
        if (j &lt; l - 1) {
          msg += ', ';
        }
      }

      msg += ']';
    }
    else {
      msg += common.serialize(obj[keys[i]], keys[i]);
    }

    if (i &lt; length - 1) {
      msg += ', ';
    }
  }

  return msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//
// Remark: Have some extra logic for detecting if we want to make a bulk
// request to loggly
//
var isBulk = Array.isArray(msg);
function serialize(msg) {
  if (msg instanceof Object) {
    return self.json ? stringify(msg) : common.<span class="apidocCodeKeywordSpan">serialize</span>(msg);
  }
  else {
    return self.json ? stringify({ message: msg }) : msg;
  }
}

msg = isBulk ? msg.map(serialize).join('\n') : serialize(msg);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.loggly" id="apidoc.module.loggly.loggly">module loggly.loggly</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.loggly.Loggly" id="apidoc.element.loggly.loggly.Loggly">
        function <span class="apidocSignatureSpan">loggly.loggly.</span>Loggly
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Loggly = function (options) {
  if (!options || !options.subdomain || !options.token) {
    throw new Error('options.subdomain and options.token are required.');
  }

  events.EventEmitter.call(this);
  this.subdomain    = options.subdomain;
  this.token        = options.token;
  this.host         = options.host || 'logs-01.loggly.com';
  this.json         = options.json || null;
  this.auth         = options.auth || null;
  this.proxy        = options.proxy || null;
  this.userAgent    = 'node-loggly ' + loggly.version;
  this.useTagHeader = 'useTagHeader' in options ? options.useTagHeader : true;

  //
  // Set the tags on this instance.
  //
  this.tags = options.tags
    ? this.tagFilter(options.tags)
    : null;

  var url   = 'https://' + this.host,
      api   = options.api  || 'apiv2';

  this.urls = {
    default: url,
    log:     [url, 'inputs', this.token].join('/'),
    bulk:    [url, 'bulk', this.token].join('/'),
    api:     'https://' + [this.subdomain, 'loggly', 'com'].join('.') + '/' + api
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.loggly.Search" id="apidoc.element.loggly.loggly.Search">
        function <span class="apidocSignatureSpan">loggly.loggly.</span>Search
        <span class="apidocSignatureSpan">(options, client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Search = function (options, client) {
  if (!options || (!options.query &amp;&amp; !options.q)) {
    throw new Error('options.query is required to execute a Loggly search.');
  }

  events.EventEmitter.call(this);

  if (options.query) {
    options.q = options.query;
    delete options.query;
  }

  this.options = options;
  this.client  = client;

  //
  // If we're passed a callback, run immediately.
  //
  if (options.callback) {
    this.callback = options.callback;
    delete options.callback;
    this.run();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.loggly.createClient" id="apidoc.element.loggly.loggly.createClient">
        function <span class="apidocSignatureSpan">loggly.loggly.</span>createClient
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createClient = function (options) {
  return new Loggly(options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### Getting Started
Before we can do anything with Loggly, we have to create a client with valid credentials. We will authenticate for you automatically
:

``` js
var loggly = require('loggly');

var client = loggly.<span class="apidocCodeKeywordSpan">createClient</span>({
  token: "your-really-long-input-token",
  subdomain: "your-subdomain",
  auth: {
    username: "your-username",
    password: "your-password"
  },
  //
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.loggly.loggly.serialize" id="apidoc.element.loggly.loggly.serialize">
        function <span class="apidocSignatureSpan">loggly.loggly.</span>serialize
        <span class="apidocSignatureSpan">(obj, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serialize = function (obj, key) {
  if (obj === null) {
    obj = 'null';
  }
  else if (obj === undefined) {
    obj = 'undefined';
  }
  else if (obj === false) {
    obj = 'false';
  }

  if (typeof obj !== 'object') {
    return key ? key + '=' + obj : obj;
  }

  var msg = '',
      keys = Object.keys(obj),
      length = keys.length;

  for (var i = 0; i &lt; length; i++) {
    if (Array.isArray(obj[keys[i]])) {
      msg += keys[i] + '=[';

      for (var j = 0, l = obj[keys[i]].length; j &lt; l; j++) {
        msg += common.serialize(obj[keys[i]][j]);
        if (j &lt; l - 1) {
          msg += ', ';
        }
      }

      msg += ']';
    }
    else {
      msg += common.serialize(obj[keys[i]], keys[i]);
    }

    if (i &lt; length - 1) {
      msg += ', ';
    }
  }

  return msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//
// Remark: Have some extra logic for detecting if we want to make a bulk
// request to loggly
//
var isBulk = Array.isArray(msg);
function serialize(msg) {
  if (msg instanceof Object) {
    return self.json ? stringify(msg) : common.<span class="apidocCodeKeywordSpan">serialize</span>(msg);
  }
  else {
    return self.json ? stringify({ message: msg }) : msg;
  }
}

msg = isBulk ? msg.map(serialize).join('\n') : serialize(msg);
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.loggly.search" id="apidoc.module.loggly.search">module loggly.search</a></h1>


    <h2>
        <a href="#apidoc.element.loggly.search.Search" id="apidoc.element.loggly.search.Search">
        function <span class="apidocSignatureSpan">loggly.search.</span>Search
        <span class="apidocSignatureSpan">(options, client)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Search = function (options, client) {
  if (!options || (!options.query &amp;&amp; !options.q)) {
    throw new Error('options.query is required to execute a Loggly search.');
  }

  events.EventEmitter.call(this);

  if (options.query) {
    options.q = options.query;
    delete options.query;
  }

  this.options = options;
  this.client  = client;

  //
  // If we're passed a callback, run immediately.
  //
  if (options.callback) {
    this.callback = options.callback;
    delete options.callback;
    this.run();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>